#include <bits/stdc++.h>
using namespace std;
#define rep(i, n) for (int i = 0; i < (n); i++)
using P = pair<int, int>;
using uint = unsigned int;

// https://atcoder.jp/contests/abc018/tasks/abc018_4

// ðŸ”·åˆè¦‹ã§ã©ã†ã‚„ã£ãŸã‚‰è§£ã‘ã‚‹ã‹
// çµè«–ã¯åŠåˆ†å…¨åˆ—æŒ™ã ãŒã€å®Ÿéš›å…¨æŽ¢ç´¢ã™ã‚‹ã®ã¯ç‰‡æ–¹ã®ã¿ã§ã€ã‚‚ã†ä¸€æ–¹ã¯è²ªæ¬²ã«æ±ºã‚ã‚‰ã‚Œã‚‹å•é¡Œ
// è€ƒãˆæ–¹ã¨ã—ã¦ã¯ã€å…¨çµ„ã¿åˆã‚ã›ã®æŽ¢ç´¢ã¯ç„¡ç†ã ãŒåˆ¶ç´„çš„ã«åŠåˆ†ã¯æŽ¢ç´¢ã§ãã‚‹ã®ã§åŠåˆ†å…¨åˆ—æŒ™ã§è€ƒãˆã‚‹ã€‚
// ã—ã‹ã—ç”·å¥³ãã‚Œãžã‚Œã®çµ„ã¿åˆã‚ã›åŒå£«ã‚’ã€å˜èª¿ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ä½¿ã£ã¦é«˜é€Ÿã«ãƒžãƒƒãƒãƒ³ã‚°ã™ã‚‹ã®ã¯ç„¡ç†ã€‚
// ã“ã®æ™‚ç‚¹ã§å…¸åž‹çš„ãªåŠåˆ†å…¨åˆ—æŒ™ã®è§£æ³•ã§ã¯ãªããªã£ãŸãŒã€ç‰‡æ–¹å…¨æŽ¢ç´¢ã§ãã‚‹ã®ã¯å¤§ãã„ã®ã§ã€ä¸€æ–¹ã‚’å›ºå®šã—ã¦è€ƒãˆã‚‹ã€‚
// ã™ã‚‹ã¨è²ªæ¬²ã«ã‚‚ã†ä¸€æ–¹ã‚’æ±ºã‚ã‚‰ã‚Œã‚‹ã“ã¨ãŒã‚ã‹ã‚‹

// ðŸ”·æŠ‘ãˆã‚‹ã¹ãæŠ½è±¡è«–ã¯ï¼Ÿ
// åŠåˆ†å…¨åˆ—æŒ™ã§ã‚‚ã€å…¨æŽ¢ç´¢ã™ã‚‹ã®ã¯ä¸€æ–¹ã®ã¿ã¨ã„ã†ã‚±ãƒ¼ã‚¹ã‚‚ã‚ã‚‹

int main() {
    int n, m, p, q, r; cin >> n >> m >> p >> q >> r;
    vector<vector<P>> x(n);
    rep(i, r) {
        int xi, yi, zi; cin >> xi >> yi >> zi;
        xi--, yi--;
        x[xi].emplace_back(yi, zi);
    }

    int ans = 0;
    rep(s, 1 << n) {
        if (popcount(uint(s)) != p) continue;
        vector<int> score(m);
        rep(i, n) {
            if (s >> i & 1) {
                for (auto [y, z] : x[i]) score[y] += z;
            }
        }

        sort(score.begin(), score.end(), greater());
        int res = 0;
        rep(i, q) res += score[i];
        ans = max(ans, res);
    }
    cout << ans << endl;
}
