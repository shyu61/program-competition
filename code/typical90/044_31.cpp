#include <bits/stdc++.h>
using namespace std;
#define rep(i, n) for (int i = 0; i < (n); i++)
using ll = long long;
using P = pair<ll, ll>;

// é–¢é€£å•é¡Œ: https://atcoder.jp/contests/abc189/tasks/abc189_e
// ã‚„ã‚„ç‰¹æ®Šãªè§£æ³•

// ðŸ”·åˆè¦‹ã§ã©ã†ã‚„ã£ãŸã‚‰è§£ã‘ã‚‹ã‹
// ã‚¯ã‚¨ãƒªå•é¡Œã§ä¸€å›žã®æ“ä½œã§è¤‡æ•°ã®è¦ç´ ã‚’å¤‰æ›ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‚¿ã‚¤ãƒ—ã®å•é¡Œ
// ç‚¹åŒå£«ã®ç›¸å¯¾é–¢ä¿‚ãŒä¿æŒã•ã‚Œã‚‹ã‹ã‚’ã¾ãšç¢ºèªã—ã€ä¿æŒã•ã‚Œãªã„ãŒæ˜Žã‚‰ã‹ã«è¦å‰‡çš„ã«é–¢ä¿‚æ€§ãŒå¤‰åŒ–ã™ã‚‹ã“ã¨ãŒäºˆæƒ³ã§ãã‚‹
// æ•…ã«ä»£è¡¨å€¤å¤‰æ›ã§ã¯ãªãã€ä¸€èˆ¬é …ã‚’æ±‚ã‚ã‚‰ã‚Œãªã„ã‹ã®æ¤œè¨Žã«ãªã‚‹ã€‚ç·šå½¢å¤‰æ›ã®ã¿ã‹ã‚‰ãªã‚‹ã“ã¨ã‹ã‚‰å¤‰æ›è¡Œåˆ—ã‚’å®šç¾©ã§ããã†ã¨æ€ã„ã¤ã‘ã‚‹

// ðŸ”·é¡žå•ã‚’è€ƒãˆã‚‹
// påº¦å›žè»¢,ç‚¹å¯¾è±¡,å¤‰æ›é–¢æ•°ãªã©ã®æ“ä½œãŒã‚ã‚‹å•é¡Œãªã©: å…¨ã¦ç·šå½¢å¤‰æ›ãªã®ã§ã‚¢ãƒ•ã‚£ãƒ³å¤‰æ›ã§ãã‚‹
// 60åº¦å›žè»¢æ“ä½œãŒ10^9å›ž: å‘¨æœŸçš„ãªå¤‰æ›ã¯å‰°ä½™ã‚’å–ã‚Œã°è‰¯ã„
// åŒè³ªå¤‰æ›ãŒ10^9å›ž: åŒã˜å¤‰æ›è¡Œåˆ—ã§è¡¨ã›ã‚‹ãªã‚‰è¡Œåˆ—ç´¯ä¹—ãŒä½¿ãˆã‚‹

int main() {
    int n; cin >> n;
    vector<int> X(n), Y(n);
    rep(i, n) cin >> X[i] >> Y[i];

    int m; cin >> m;
    vector<P> org(m + 1), vec(m + 1);
    // åŽŸç‚¹ã‚’åŸºæº–ã«è€ƒãˆã‚‹ã“ã¨ã§ã€ãƒ™ã‚¯ãƒˆãƒ«ã¯ç¬¦å·ã¨flipå¤‰åŒ–ã®ã¿ã«ãªã‚‹
    // -> é©å½“ãª2æ•´æ•°ã‚’ä½¿ãˆã°ååˆ†æƒ…å ±ã‚’ä¿å­˜ã§ãã‚‹
    vec[0] = {1, 2};
    rep(i, m) {
        int type, p = 0; cin >> type;
        if (type > 2) cin >> p;

        auto [x, y] = org[i];
        auto [vx, vy] = vec[i];
        if (type == 1) {
            org[i + 1] = {y, -x};
            vec[i + 1] = {vy, -vx};
        }
        if (type == 2) {
            org[i + 1] = {-y, x};
            vec[i + 1] = {-vy, vx};
        }
        if (type == 3) {
            org[i + 1] = {x + (p - x) * 2, y};
            vec[i + 1] = {-vx, vy};
        }
        if (type == 4) {
            org[i + 1] = {x, y + (p - y) * 2};
            vec[i + 1] = {vx, -vy};
        }
    }

    int q; cin >> q;
    while (q--) {
        int a, b; cin >> a >> b, b--;
        auto [x, y] = org[a];
        auto [vx, vy] = vec[a];

        if (abs(vx) == 1) {
            vx *= X[b];
            vy = vy / 2 * Y[b];
        } else {
            vx = vx / 2 * Y[b];
            vy *= X[b];
        }

        cout << x + vx << ' ' << y + vy << '\n';
    }
}
