#include <bits/stdc++.h>
using namespace std;
#define rep(i, n) for (int i = 0; i < (n); i++)
using TP = tuple<int, int, string>;

// ðŸ”·åˆè¦‹ã§ã©ã†ã‚„ã£ãŸã‚‰è§£ã‘ã‚‹ã‹
// ã¾ãšã¯ã©ã“ãŒãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã‹ã‚’è€ƒãˆã‚‹ã€‚æ–‡å­—åˆ—ã®copyãŒãƒœãƒˆãƒ«ãƒãƒƒã‚¯ãªã®ã§ã€type=1,3ã‚¯ã‚¨ãƒªã§ã®ç½®ãæ›ãˆã§ã€
// æ–‡å­—åˆ—ã‚’copyã—ãªã„æ–¹æ³•ã‚’ã¨ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚
// æ–‡å­—åˆ—ã®ä»£ã‚ã‚Šã«pcç•ªå·ã‚’ä½¿ã†ã®ãŒæœ€ã‚‚ç´ ç›´ã ãŒã€å‚ç…§å…ƒã®æ–‡å­—åˆ—ãŒå‹•çš„ã«å¤‰åŒ–ã™ã‚‹ã®ã§ã‚„ã‚„ã“ã—ãã†ã€‚
// æ¬²ã—ã„ã®ãŒã‚ã‚‹ä¸€ç‚¹ã®æœ€çµ‚çŠ¶æ…‹ã®ã¿ã§ã‚ã‚‹ã“ã¨ã«æ³¨ç›®ã™ã‚‹ã¨ã€é–¢ä¿‚ã‚ã‚‹éƒ¨åˆ†ã ã‘å†å¸°çš„ã«ãƒˆãƒ©ãƒƒã‚¯ã™ã‚Œã°è‰¯ã„ã“ã¨ãŒã‚ã‹ã‚‹ã€‚

// ðŸ”·æŠ‘ãˆã‚‹ã¹ãæŠ½è±¡è«–ã¯ï¼Ÿ
// næ–‡å­—ã®copyã¯O(n)ã‹ã‹ã‚‹
// "+"ã¨"+="ã¯è¨ˆç®—é‡ãŒé•ã†
// ã‚¯ã‚¨ãƒªå•é¡Œã‚„é€æ¬¡å•é¡Œã¯dpã®å´é¢ã‚’æŒã£ã¦ã„ã‚‹
// - æœ€çµ‚çŠ¶æ…‹ã®ã¿å•ã‚ã‚Œã‚‹å ´åˆã¯ã€é€†é †ã‚„å†å¸°ãªã©ã‚‚é¸æŠžè‚¢ã«ãªã‚‹
// - ãƒˆãƒ©ãƒƒã‚¯ã™ã‚‹çŠ¶æ…‹æ•°ã‚’çµžã‚ŠãŸã„å ´åˆã¯å†å¸°ãŒæœ‰åŠ¹

int main() {
    int n, q; cin >> n >> q;
    vector<TP> qs(q);
    rep(i, q) {
        int t, p; cin >> t >> p, p--;
        string s = "";
        if (t == 2) cin >> s;
        qs[i] = {t, p, s};
    }

    int tp = -1;
    vector<string> ans;
    for (int i = q - 1; i >= 0; i--) {
        auto& [t, p, s] = qs[i];
        if (tp == -1) {
            if (t == 3) tp = p;
        } else {
            if (tp == p) {
                if (t == 1) tp = -1;
                if (t == 2) ans.push_back(s);
            }
        }
    }

    for (int i = ans.size() - 1; i >= 0; i--) cout << ans[i];
    cout << endl;
}
