#include <bits/stdc++.h>
#include <atcoder/modint>
using namespace std;
#define rep(i, n) for (int i = 0; i < (n); i++)
using mint = atcoder::modint998244353;

// ğŸ”·åˆè¦‹ã§ã©ã†ã‚„ã£ãŸã‚‰è§£ã‘ã‚‹ã‹
// ç¢ºç‡/æœŸå¾…å€¤ã®å•é¡Œã¯ã€dpã‹çµ„ã¿åˆã‚ã›è«–ã‹ã®2ã¤ã«å¤§åˆ¥ã•ã‚Œã‚‹ã€‚
// é€æ¬¡çš„ãªæ“ä½œã«ã‚ˆã‚Šç´¯ç©çš„ã«ç¢ºç‡/æœŸå¾…å€¤ãŒå¤‰åŒ–ã—ã¦ã„ãå ´åˆã¯dpã€æ“ä½œã«æ™‚å·®ãŒãªãå…¨ã¦åŒæ™‚ã«å®Ÿè¡Œã•ã‚Œã‚‹å ´åˆã¯çµ„ã¿åˆã‚ã›è«–çš„ã«è§£ã„ã¦ã„ãã€‚
// æœ¬å•é¡Œã¯æ˜ã‚‰ã‹ã«å¾Œè€…ã€‚çµ„ã¿åˆã‚ã›è«–ã¨æ•°ãˆä¸Šã’ã¯éå¸¸ã«è¿‘ã„ã“ã¨ã‚’å¿µé ­ã«ç½®ãã¨ã€
// ã‚ã‚‹ã‚µã‚¤ã‚³ãƒ­ã®ç›®AijãŒmaxã«ãªã‚‹é€šã‚Šæ•°ãŒãã‚Œãã‚Œã©ã‚Œã ã‘ã‚ã‚‹ã‹ã‚’æ±‚ã‚ã‚‹å•é¡Œã«ãªã‚‹ã€‚è€ƒãˆæ–¹ã¨ã—ã¦ã¯ä¸»å®¢è»¢å€’ã«è¿‘ã„(æœŸå¾…å€¤ã«ãŠã‘ã‚‹ä¸»å®¢è»¢å€’ã¯ã€æœŸå¾…å€¤ã®ç·šå½¢æ€§ã®åˆ©ç”¨ã¨ã¿ãªã›ã‚‹)ã€‚
// AijãŒmaxã«ãªã‚‹ãªã‚‰ã€ä»–ã®ã‚µã‚¤ã‚³ãƒ­ã®ç›®ã¯å…¨ã¦Aijä»¥ä¸‹ã§ã‚ã‚‹ã€‚ã“ã‚Œã‚’ã€Œé›†åˆã€ã¨ã€Œæ¡ä»¶ã€ã§ä¸€æ—¦æ•´ç†ã™ã‚‹ã¨ã€
// å…¨ã¦ã®ã‚µã‚¤ã‚³ãƒ­ã®å‡ºç›®ãŒAijä»¥ä¸‹ã®é›†åˆã«ãŠã„ã¦ã€å°‘ãªãã¨ã‚‚1ã¤AijãŒå‡ºã‚‹ç¢ºç‡ã‚’æ±‚ã‚ã‚‹å•é¡Œã«å¸°ç€ã§ãã‚‹ã€‚
// æ˜ã‚‰ã‹ã«ä½™äº‹è±¡ã§ã‚ã‚Šã€sortã—ã¦èª­ã‚“ã§ã„ãã¨å„é›†åˆã®ç¢ºç‡ã¯ç´¯ç©çš„ã«è¨ˆç®—ã§ããã†ã¨ã‚ã‹ã‚‹ã€‚

// ğŸ”·æŠ‘ãˆã‚‹ã¹ãæŠ½è±¡è«–ã¯ï¼Ÿ
// ç¢ºç‡å•é¡Œã§ã¯ã€maxãŒä½•ã‹ã®å€¤ã«ä¸€è‡´ã™ã‚‹ç¢ºç‡ã‚’æ±‚ã‚ã‚‹ã‚ˆã‚Šã€maxãŒä½•ã‹ã®å€¤ä»¥ä¸‹ã«ãªã‚‹ç¢ºç‡ã‚’æ±‚ã‚ã‚‹æ–¹ãŒé¥ã‹ã«ç°¡å˜
// - æ•…ã«ä½™äº‹è±¡ã‚’ä½¿ã†
// ç¢ºç‡/æœŸå¾…å€¤ã®å•é¡Œã¯ã€dpã‹çµ„ã¿åˆã‚ã›è«–ã‹ã®2ã¤ã«å¤§åˆ¥ã•ã‚Œã‚‹
// - çµ„ã¿åˆã‚ã›è«–ã®è§£ãæ–¹
//   - ã¾ãšã€Œé›†åˆã€ã¨ã€Œæ¡ä»¶ã€ã‚’æ•°å­¦çš„ã«è§£é‡ˆã™ã‚‹
//   - P,C,ä½™äº‹è±¡,åŒ…é™¤åŸç†,(dp) ãªã©ã®æ‰‹æ³•ã®ã©ã‚Œã‚’ä½¿ã†ã‹æ¤œè¨ã™ã‚‹

int main() {
    int n; cin >> n;
    vector<vector<int>> a(n, vector<int>(6));
    rep(i, n) rep(j, 6) cin >> a[i][j];

    // {ã‚µã‚¤ã‚³ãƒ­ã®ç›®: ã‚µã‚¤ã‚³ãƒ­ç•ªå·}
    map<int, vector<int>, greater<>> mp;
    rep(i, n) {
        unordered_set<int> st(a[i].begin(), a[i].end());
        for (auto v : st) mp[v].push_back(i);
    }

    mint ans = 0, now = 1;  // å…¨ã¦kä»¥ä¸‹ã®ç¢ºç‡(åˆæœŸã¯k=INF)
    for (auto& [k, v] : mp) {
        // E(k) = (å…¨ã¦kä»¥ä¸‹ã®ç¢ºç‡ - å…¨ã¦kæœªæº€ã®ç¢ºç‡) * k;
        // å…¨ã¦kæœªæº€ã®ç¢ºç‡ã‚’è¨ˆç®—
        mint p = now;
        for (auto i : v) {
            // ã‚µã‚¤ã‚³ãƒ­iã«ãŠã„ã¦ã€kä»¥ä¸‹ã®ç¢ºç‡ã¨kæœªæº€ã®ç¢ºç‡
            int c1 = 0, c2 = 0;
            rep(j, 6) {
                if (a[i][j] <= k) c1++;
                if (a[i][j] < k) c2++;
            }
            p *= (6 / mint(c1)) * (mint(c2) / 6);
        }
        // æœŸå¾…å€¤è¨ˆç®—
        ans += k * (now - p);
        swap(now, p);
    }

    cout << ans.val() << endl;
}
